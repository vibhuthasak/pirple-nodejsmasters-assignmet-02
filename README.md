# Assignment 02 - NodeJS Master class

Start the app:

> __node index.js__




1. Creating a user on the app

__POST__ request to __localhost:{port}/users__

__Payload:__
```json
{
	"firstName" : "xxxx",
	"lastName" : "yyyy",
	"email" : "xyz@abcd.com",
	"password" : "password",
	"tosAgreement" : true
}
```

Returns:
* 200 - If User creation success
* 400 - Bad Request (Description for the error will be return)


2. Create a token for the user (LOGIN)

__POST__ request to __localhost:3000/tokens__

__Payload:__
```json
{
	"email" : "xyz@abcd.com",
	"password" : "password"
}
```

Returns:
* 200 - 
```json
{
    "email": "xyz@abcd.com",
    "id": "famh3cujeaewlw60z1ti3uqk8iimf6rlmod3viv538eowvu8vejcnnv9y0sdsymc",
    "expires": 1549270887170
}
```
__NOTE:__
Your token for future requests will be
```
famh3cujeaewlw60z1ti3uqk8iimf6rlmod3viv538eowvu8vejcnnv9y0sdsymc
```


3. Get the PIZZA Menu

__GET__ request to __localhost:3000/pizza__

__Query string:__
* email: xyz@abcd.com

__Headers:__
* token: <your token from the 2nd step>

Returns:
* 200 - 
```json
[
    {
        "id": 1,
        "name": "Devilled Chicken",
        "price": 15
    },
    {
        "id": 2,
        "name": "Cheese Lovers",
        "price": 14
    },
    {
        "id": 3,
        "name": "Hot Garlic Prawns",
        "price": 19
    },
    {
        "id": 4,
        "name": "Devilled Beef",
        "price": 13
    }
]
```

4. Add PIZZA to your cart

__POST__ request to __localhost:3000/pizza__

__Payload__:
```json
{
    "email": "xyz@abcd.com",
    "pizzaId": 4,
    "pizzaCount": 2
}
```

```pizzaId``` can be found using the 3rd step

__Headers__:
* token = <your token from the 2nd step>

__Returns__:
* 200 
```
{
    "Status": "Cart updated"
}
```

5. View your cart

__GET__ request to __localhost:3000/users__

__Query String__:
* email = xyz@abcd.com

__Headers__:
* token = <your token from the 2nd step>

__Returns__:
```json
{
	"firstName" : "xxxx",
	"lastName" : "yyyy",
	"email" : "xyz@abcd.com",
	"password" : "password",
	"tosAgreement" : true,
    	"cart": [
		{
		    "id": 1,
		    "name": "Devilled Chicken",
		    "count": 32232,
		    "price": 483480
		},
		{
		    "id": 3,
		    "name": "Hot Garlic Prawns",
		    "count": 213,
		    "price": 4047
		}
    	]
}
```

6. Updating your cart

__REQUEST like in 4th step with the same PizzaId and different count will update the cart

7. Deleting an item from the cart

__DELETE__ request to __localhost:3000/pizza__

__Query String__
* email = xyz@abcd.com
* pizzaid = <Id of the pizza you want to delete>
	
__Headers__
* token = <your token from the 2nd step>


8. Checkout your cart

__POST__ request to __localhost:3000/checkout__

__Payload__
```json
{
    "email": "xyz@abcd.com",
    "stripeToken": <stripe token which is generated by STRIPE using your credit card credentials>
}
```

__Headers__
* token = <your token from the 2nd step>

If the payment is succeed you will get an Email to your mailbox regarding the Transaction
